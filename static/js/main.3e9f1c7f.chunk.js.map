{"version":3,"sources":["components/Card/Card.jsx","components/Main/Main.jsx","App.js","index.js"],"names":["Card","uploadImage","name","price","className","id","src","alt","Main","useState","setUploadImage","filename","setFilename","data","setData","error","setError","errorId","setErrorId","idUser","setIdUser","setName","setPrice","useEffect","fetch","process","then","res","text","json","JSON","parse","substr","slice","htmlFor","type","hidden","onChange","event","URL","createObjectURL","target","files","accept","placeholder","value","onClick","user","table","rows","filter","item","c","f","length","v","replace","html2canvas","document","getElementById","canvas","url","response","blob","link","createElement","href","download","click","catch","console","toDataURL","disabled","App","render","StrictMode"],"mappings":"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","file":"static/js/main.3e9f1c7f.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Card = ({uploadImage, name, price, }) => {\n  return (\n    <div className=\"card\" id=\"card\">\n      {!uploadImage && <div className=\"non-image\">insert image</div>}\n      {uploadImage && <img src={uploadImage} alt=\"upload\" className=\"card__image\"/>}\n      <div className=\"card__description\">\n        <div className=\"card__description__header\">\n          <div className=\"card__description__title\">\n            {name}\n          </div>\n        </div>\n        <div className=\"card__description__content\">\n          <div className=\"card__description__prices\">\n            <div className=\"card__description__prices__item card__description__prices__item--sale\">\n              <p className=\"price\">${price}</p>\n              <p>test price</p>\n            </div>\n            <span className=\"card__description__prices__divider\">|</span>\n            <div className=\"card__description__prices__item\">\n              <p className=\"price\">$12,55</p>\n              <p>full price</p>\n            </div>\n          </div>\n          <div className=\"card__description__options\">\n            <div className=\"card__description__options__rate\">5 stars</div>\n            <p className=\"card__description__oprions__reviews\">47 reviews</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Card;","import React, {useEffect, useState} from \"react\";\nimport html2canvas from \"html2canvas\";\n\nimport Card from \"../Card/Card\";\n\n\nconst Main = () => {\n  const [uploadImage, setUploadImage] = useState('');\n  const [filename, setFilename] = useState('');\n  const [data, setData] = useState([]);\n  const [error, setError] = useState('');\n  const [errorId, setErrorId] = useState('');\n  const [idUser, setIdUser] = useState('');\n\n  const [name, setName] = useState('test');\n  const [price, setPrice] = useState('14,14');\n\n  const fileTypes = \".png, .jpg, .jpeg\";\n\n  const handleChange = (event) => setUploadImage(URL.createObjectURL(event.target.files[0]));\n\n  function download(url, filename) {\n    fetch(url)\n      .then(response => response.blob())\n      .then(blob => {\n        const link = document.createElement(\"a\");\n        link.href = URL.createObjectURL(blob);\n        link.download = filename;\n        link.target = \"_blank\";\n        link.click();\n      })\n      .catch(console.error);\n  }\n\n  const takeScreenshot = () => {\n    if (filename) {\n      html2canvas(document.getElementById('card')).then(canvas => {\n        download(canvas.toDataURL(), filename);\n      })\n      setError('');\n    } else {\n      setError('Enter a file name');\n    }\n  }\n\n  useEffect(() => {\n    const spreadsheetId = process.env.REACT_APP_GOOGLE_SHEET_ID;\n    fetch(`https://docs.google.com/spreadsheets/d/${spreadsheetId}/gviz/tq?tqx=out:json`)\n      .then(res => res.text())\n      .then(text => {\n        const json = JSON.parse(text.substr(47).slice(0, -2))\n        setData(json);\n      })\n  })\n\n  const getData = () => {\n    const user = data.table.rows.filter(item => item.c[0].f === idUser);\n    if (user.length !== 0) {\n      const price = (user[0]?.c[5].v).replace(' USD', '');\n      setPrice(price);\n      setName(user[0].c[1].v);\n      setErrorId('');\n    } else {\n      setErrorId(`User with id \"${idUser}\" does not exist`)\n    }\n  }\n\n  const getItemById = event => setIdUser(event.target.value);\n\n  return (\n    <div className=\"main\">\n      <div className=\"panel\">\n        <label htmlFor=\"file\" className=\"button button--choose\">Upload photo</label>\n        <input type=\"file\" id=\"file\" hidden onChange={handleChange} accept={fileTypes}/>\n        <div className=\"panel__user\">\n          <input type=\"text\" placeholder=\"Enter user id\" onChange={getItemById}/>\n          <button onClick={getData} className=\"button button--default\">get data</button>\n          {errorId && <p className={`error-message ${error}`}>{errorId}</p>}\n        </div>\n        <div className=\"panel__save\">\n          <input\n            type=\"text\"\n            onChange={event => setFilename(event.target.value)}\n            placeholder=\"enter file name (default 'screen')\"\n          />\n          <button onClick={takeScreenshot} className=\"button button--default\" disabled={errorId}>Save image</button>\n          {error && <p className=\"error-message\">{error}</p>}\n        </div>\n      </div>\n\n      <Card\n        uploadImage={uploadImage}\n        name={name}\n        price={price}/>\n\n    </div>\n  )\n}\n\nexport default Main;","import UploadButton from \"./components/Main/Main\";\nimport './App.css';\nimport './Main.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <UploadButton />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport { render } from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nrender(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}